var wn=Object.create;var Pt=Object.defineProperty,vn=Object.defineProperties,Rn=Object.getOwnPropertyDescriptor,Cn=Object.getOwnPropertyDescriptors,jn=Object.getOwnPropertyNames,yt=Object.getOwnPropertySymbols,Tn=Object.getPrototypeOf,It=Object.prototype.hasOwnProperty,Qt=Object.prototype.propertyIsEnumerable;var Xt=n=>{throw TypeError(n)};var Tt=(n,t,e)=>t in n?Pt(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,H=(n,t)=>{for(var e in t||(t={}))It.call(t,e)&&Tt(n,e,t[e]);if(yt)for(var e of yt(t))Qt.call(t,e)&&Tt(n,e,t[e]);return n},Y=(n,t)=>vn(n,Cn(t));var We=(n,t)=>{var e={};for(var o in n)It.call(n,o)&&t.indexOf(o)<0&&(e[o]=n[o]);if(n!=null&&yt)for(var o of yt(n))t.indexOf(o)<0&&Qt.call(n,o)&&(e[o]=n[o]);return e};var Pn=(n,t)=>()=>(t||n((t={exports:{}}).exports,t),t.exports);var In=(n,t,e,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of jn(t))!It.call(n,i)&&i!==e&&Pt(n,i,{get:()=>t[i],enumerable:!(o=Rn(t,i))||o.enumerable});return n};var Jn=(n,t,e)=>(e=n!=null?wn(Tn(n)):{},In(t||!n||!n.__esModule?Pt(e,"default",{value:n,enumerable:!0}):e,n));var Ie=(n,t,e)=>Tt(n,typeof t!="symbol"?t+"":t,e),Jt=(n,t,e)=>t.has(n)||Xt("Cannot "+e);var g=(n,t,e)=>(Jt(n,t,"read from private field"),e?e.call(n):t.get(n)),R=(n,t,e)=>t.has(n)?Xt("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(n):t.set(n,e),J=(n,t,e,o)=>(Jt(n,t,"write to private field"),o?o.call(n,e):t.set(n,e),e),Z=(n,t,e)=>(Jt(n,t,"access private method"),e);var ze=(n,t,e,o)=>({set _(i){J(n,t,i,e)},get _(){return g(n,t,o)}});var D=(n,t,e)=>new Promise((o,i)=>{var c=l=>{try{a(e.next(l))}catch(r){i(r)}},s=l=>{try{a(e.throw(l))}catch(r){i(r)}},a=l=>l.done?o(l.value):Promise.resolve(l.value).then(c,s);a((e=e.apply(n,t)).next())});var rn=Pn((on,St)=>{(function(n,t){typeof define=="function"&&define.amd?define("uri-templates",[],t):typeof St!="undefined"&&St.exports?St.exports=t():n.UriTemplate=t()})(on,function(){var n={"+":!0,"#":!0,".":!0,"/":!0,";":!0,"?":!0,"&":!0},t={"*":!0},e=/[:/&?#]/;function o(a){return encodeURI(a).replace(/%25[0-9][0-9]/g,function(l){return"%"+l.substring(3)})}function i(a){return a=a.replace(/%../g,""),encodeURIComponent(a)===a}function c(a){var l="";n[a.charAt(0)]&&(l=a.charAt(0),a=a.substring(1));var r="",u="",f=!0,m=!1,p=!1;l=="+"?f=!1:l=="."?(u=".",r="."):l=="/"?(u="/",r="/"):l=="#"?(u="#",f=!1):l==";"?(u=";",r=";",m=!0,p=!0):l=="?"?(u="?",r="&",m=!0):l=="&"&&(u="&",r="&",m=!0);for(var d=[],y=a.split(","),h=[],O={},S=0;S<y.length;S++){var w=y[S],V=null;if(w.indexOf(":")!=-1){var k=w.split(":");w=k[0],V=parseInt(k[1])}for(var U={};t[w.charAt(w.length-1)];)U[w.charAt(w.length-1)]=!0,w=w.substring(0,w.length-1);var L={truncate:V,name:w,suffices:U};h.push(L),O[w]=L,d.push(w)}var ce=function(A){for(var v="",M=0,B=0;B<h.length;B++){var C=h[B],b=A(C.name);if(b==null||Array.isArray(b)&&b.length==0||typeof b=="object"&&Object.keys(b).length==0){M++;continue}if(B==M?v+=u:v+=r||",",Array.isArray(b)){m&&(v+=C.name+"=");for(var Q=0;Q<b.length;Q++)Q>0&&(v+=C.suffices["*"]&&r||",",C.suffices["*"]&&m&&(v+=C.name+"=")),v+=f?encodeURIComponent(b[Q]).replace(/!/g,"%21"):o(b[Q])}else if(typeof b=="object"){m&&!C.suffices["*"]&&(v+=C.name+"=");var P=!0;for(var I in b)P||(v+=C.suffices["*"]&&r||","),P=!1,v+=f?encodeURIComponent(I).replace(/!/g,"%21"):o(I),v+=C.suffices["*"]?"=":",",v+=f?encodeURIComponent(b[I]).replace(/!/g,"%21"):o(b[I])}else m&&(v+=C.name,(!p||b!="")&&(v+="=")),C.truncate!=null&&(b=b.substring(0,C.truncate)),v+=f?encodeURIComponent(b).replace(/!/g,"%21"):o(b)}return v},le=function(A,v,M){if(u&&(A=A.substring(u.length)),h.length==1&&h[0].suffices["*"]){for(var B=h[0],C=B.name,b=B.suffices["*"]?A.split(r||","):[A],Q=f&&A.indexOf("=")!=-1,P=1;P<b.length;P++){var A=b[P];Q&&A.indexOf("=")==-1&&(b[P-1]+=(r||",")+A,b.splice(P,1),P--)}for(var P=0;P<b.length;P++){var A=b[P];f&&A.indexOf("=")!=-1&&(Q=!0);var I=A.split(",");I.length==1?b[P]=I[0]:b[P]=I}if(m||Q){for(var X=v[C]||{},N=0;N<b.length;N++){var je=A;if(!(m&&!je)){if(typeof b[N]=="string"){var A=b[N],K=A.split("=",1)[0],A=A.substring(K.length+1);if(f){if(M&&!i(A))return;A=decodeURIComponent(A)}je=A}else{var A=b[N][0],K=A.split("=",1)[0],A=A.substring(K.length+1);if(f){if(M&&!i(A))return;A=decodeURIComponent(A)}b[N][0]=A,je=b[N]}if(f){if(M&&!i(K))return;K=decodeURIComponent(K)}X[K]!==void 0?Array.isArray(X[K])?X[K].push(je):X[K]=[X[K],je]:X[K]=je}}Object.keys(X).length==1&&X[C]!==void 0?v[C]=X[C]:v[C]=X}else{if(f)for(var N=0;N<b.length;N++){var I=b[N];if(Array.isArray(I))for(var _e=0;_e<I.length;_e++){if(M&&!i(I[_e]))return;I[_e]=decodeURIComponent(I[_e])}else{if(M&&!i(I))return;b[N]=decodeURIComponent(I)}}v[C]!==void 0?Array.isArray(v[C])?v[C]=v[C].concat(b):v[C]=[v[C]].concat(b):b.length==1&&!B.suffices["*"]?v[C]=b[0]:v[C]=b}}else{for(var b=h.length==1?[A]:A.split(r||","),dt={},P=0;P<b.length;P++){for(var Te=0;Te<h.length-1&&Te<P&&!h[Te].suffices["*"];Te++);if(Te==P){dt[P]=P;continue}else{for(var Pe=h.length-1;Pe>0&&h.length-Pe<b.length-P&&!h[Pe].suffices["*"];Pe--);if(h.length-Pe==b.length-P){dt[P]=Pe;continue}}dt[P]=Te}for(var P=0;P<b.length;P++){var A=b[P];if(!(!A&&m)){var I=A.split(","),Q=!1;if(m){var A=I[0],C=A.split("=",1)[0],A=A.substring(C.length+1);I[0]=A;var B=O[C]||h[0]}else var B=h[dt[P]],C=B.name;for(var N=0;N<I.length;N++)if(f){if(M&&!i(I[N]))return;I[N]=decodeURIComponent(I[N])}(m||B.suffices["*"])&&v[C]!==void 0?Array.isArray(v[C])?v[C]=v[C].concat(I):v[C]=[v[C]].concat(I):I.length==1&&!B.suffices["*"]?v[C]=I[0]:v[C]=I}}}return 1};return{varNames:d,prefix:u,substitution:ce,unSubstitution:le}}function s(a){if(!(this instanceof s))return new s(a);for(var l=a.split("{"),r=[l.shift()],u=[],f=[],m=[],p=[];l.length>0;){var d=l.shift(),y=d.split("}")[0],h=d.substring(y.length+1),O=c(y);f.push(O.substitution),m.push(O.unSubstitution),u.push(O.prefix),r.push(h),p=p.concat(O.varNames)}this.fill=function(S){if(S&&typeof S!="function"){var w=S;S=function(L){return w[L]}}for(var V=r[0],k=0;k<f.length;k++){var U=f[k];V+=U(S),V+=r[k+1]}return V},this.fromUri=function(S,w){w=w||{};for(var V={},k=0;k<r.length;k++){var U=r[k];if(S.substring(0,U.length)!==U)return;if(S=S.substring(U.length),k>=r.length-1){if(S=="")break;return}var L=u[k];if(!(L&&S.substring(0,L.length)!==L)){for(var ce=r[k+1],le=k;;){if(le==r.length-2){var A=S.substring(S.length-ce.length);if(A!==ce)return;var v=S.substring(0,S.length-ce.length);S=A}else if(ce){var M=S.indexOf(ce),v=S.substring(0,M);S=S.substring(M)}else if(u[le+1]){var M=S.indexOf(u[le+1]);M===-1&&(M=S.length);var v=S.substring(0,M);S=S.substring(M)}else if(r.length>le+2){le++,ce=r[le+1];continue}else{var v=S;S=""}break}if(!m[k](v,V,w.strict))return}}return V},this.varNames=p,this.template=a}return s.prototype={toString:function(){return this.template},fillFromObject:function(a){return this.fill(a)},test:function(a,l){return!!this.fromUri(a,l)}},s})});import Wn from"mithril";import Se from"mithril";import nt from"mithril";function ye({style:n,datatype:t,type:e,firstPickComponent:o,typeDefs:i,fallbackComponent:c}){var s,a,l;if(o!=null)return o;if(t!=null&&((s=i[t])==null?void 0:s[n])!=null)return i[t][n];if(typeof e=="string"&&((a=i[e])==null?void 0:a[n])!=null)return i[e][n];if(Array.isArray(e)){for(let r of e)if(((l=i[r])==null?void 0:l[n])!=null)return i[r][n]}if(typeof c!="undefined")return c}function E(n,t,e){let o,i={},c;return typeof n=="string"?o=n:typeof n=="function"?c=n:n!=null&&(i=n),typeof t=="function"?c=t:t!=null&&(i=t),typeof e=="function"&&(c=e),typeof c=="undefined"&&(c=s=>s.default(i)),[o,i,c]}function j(n){return typeof n=="object"&&!Array.isArray(n)&&n!==null}function Yt(n){if(j(n)){if(typeof n["@type"]=="string")return!0;if(!Array.isArray(n["@type"]))return!1}else return!1;for(let t of n["@type"])if(typeof t!="string")return!1;return!0}function ge(n){if(Yt(n))return n["@type"]}import ue from"mithril";function ee(n,t,e){let o="",i=n,c=0,s=-1;for(;(s=i.indexOf(t))>-1;)o+=n.substring(c,c+s)+e,i=i.substring(s+t.length,i.length),c+=s+t.length;return i.length>0&&(o+=n.substring(n.length-i.length,n.length)),o}function kn(n){let t=-1,e=n.length,o=new Array(e);for(;++t<e;)typeof n[t]=="string"?o[t]=ee(ee(decodeURIComponent(n[t]),"~1","/"),"~0","~"):o[t]=n[t];return o}function Vn(n){let t=-1,e=n.length,o=new Array(e);for(;++t<e;)typeof n[t]=="string"?o[t]=encodeURIComponent(ee(ee(n[t],"~","~0"),"/","~1")):o[t]=n[t];return o}function tn(n){let t=-1,e=n.length,o=new Array(e);for(;++t<e;)typeof n[t]=="string"?o[t]=ee(ee(n[t],"~1","/"),"~0","~"):o[t]=n[t];return o}function Dn(n){let t=-1,e=n.length,o=new Array(e);for(;++t<e;)typeof n[t]=="string"?o[t]=ee(ee(n[t],"~","~0"),"/","~1"):o[t]=n[t];return o}function xn(n){if(typeof n!="string")throw new TypeError("Invalid type: JSON Pointers are represented as strings.");if(n.length===0)return[];if(n[0]!=="/")throw new ReferenceError("Invalid JSON Pointer syntax. Non-empty pointer must begin with a solidus `/`.");return tn(n.substring(1).split("/"))}function Qe(n){if(!n||n&&!Array.isArray(n))throw new TypeError("Invalid type: path must be an array of segments.");return n.length===0?"":"/".concat(Dn(n).join("/"))}function Nn(n){if(typeof n!="string")throw new TypeError("Invalid type: JSON Pointers are represented as strings.");if(n.length===0||n[0]!=="#")throw new ReferenceError("Invalid JSON Pointer syntax; URI fragment identifiers must begin with a hash.");if(n.length===1)return[];if(n[1]!=="/")throw new ReferenceError("Invalid JSON Pointer syntax.");return kn(n.substring(2).split("/"))}function Je(n){if(!n||n&&!Array.isArray(n))throw new TypeError("Invalid type: path must be an array of segments.");return n.length===0?"#":"#/".concat(Vn(n).join("/"))}var kt="Invalid Relative JSON Pointer syntax. Relative pointer must begin with a non-negative integer, followed by either the number sign (#), or a JSON Pointer.";function Zt(n){if(typeof n!="string")throw new TypeError("Invalid type: Relative JSON Pointers are represented as strings.");if(n.length===0)throw new ReferenceError(kt);let t=n.split("/"),e=t[0];if(e[e.length-1]=="#"){if(t.length>1)throw new ReferenceError(kt);e=e.substr(0,e.length-1)}let o=-1,i=e.length;for(;++o<i;)if(e[o]<"0"||e[o]>"9")throw new ReferenceError(kt);let c=tn(t.slice(1));return c.unshift(t[0]),c}function Nt(n,t){if(typeof t=="number")return t;let e=t.length;if(!e)return-1;let o=0;if(e===1&&t[0]==="-")return Array.isArray(n)?n.length:0;for(;++o<e;)if(t[o]<"0"||t[o]>"9")return-1;return parseInt(t,10)}function En(n){let t="if (typeof(it) !== 'undefined'";return n.length===0?e=>e:(t=n.reduce((e,o,i)=>e+`
	&& it !== null && typeof((it = it['`+ee(ee(n[i]+"","\\","\\\\"),"'","\\'")+"'])) !== 'undefined'","if (typeof(it) !== 'undefined'"),t=t+`) {
	return it;
 }`,new Function("it",t))}function Mn(n,t,e,o=!1){if(e.length===0)throw new Error("Cannot set the root object; assign it directly.");if(typeof n=="undefined")throw new TypeError("Cannot set values on undefined");let i=n,c=e.length,s=e.length-1,a,l=-1,r,u;for(;++l<c;){if(a=e[l],typeof a!="string"&&typeof a!="number")throw new TypeError("PathSegments must be a string or a number.");if(a==="__proto__"||a==="constructor"||a==="prototype")throw new Error("Attempted prototype pollution disallowed.");if(Array.isArray(i)){if(a==="-"&&l===s){i.push(t);return}if(u=Nt(i,a),i.length>u){if(l===s){r=i[u],i[u]=t;break}i=i[u]}else if(l===s&&u===i.length){if(o){i.push(t);return}}else o&&(i=i[u]=l===s?t:{})}else{if(typeof i[a]=="undefined"){if(o){if(l===s){i[a]=t;return}let f=Number(e[l+1]);if(Number.isInteger(f)&&Nt(i[a],f)!==-1){i=i[a]=[];continue}i=i[a]={};continue}return}if(l===s){r=i[a],i[a]=t;break}i=i[a]}}return r}function Hn(n,t){if(t.length===0)throw new Error("Cannot unset the root object; assign it directly.");if(typeof n=="undefined")throw new TypeError("Cannot unset values on undefined");let e=n,o=t.length,i=t.length-1,c,s=-1,a,l;for(;++s<o;){if(c=t[s],typeof c!="string"&&typeof c!="number")throw new TypeError("PathSegments must be a string or a number.");if(c==="__proto__"||c==="constructor"||c==="prototype")throw new Error("Attempted prototype pollution disallowed.");if(Array.isArray(e)){if(l=Nt(e,c),l>=e.length)return;if(s===i){a=e[l],delete e[l];break}e=e[l]}else{if(typeof e[c]=="undefined")return;if(s===i){a=e[c],delete e[c];break}e=e[c]}}return a}function Ln(n){return typeof n=="string"&&n.length>0&&n[0]==="#"}function nn(n){return Ln(n)?Nn:xn}function en(n){return Array.isArray(n)?n.slice(0):nn(n)(n)}function Et(n){return typeof n=="object"&&n!==null}function Fn(n){return Et(n)&&!Ye.isReference(n)}function Xe(n,t,e){let o=new Map,i=[{obj:n,path:[]}];for(;i.length;){let{obj:c,path:s}=i.shift();if(t(e(s),c),Fn(c))if(o.set(c,new ne(Je(s))),Array.isArray(c)){let a=-1,l=c.length;for(;++a<l;){let r=c[a];Et(r)&&o.has(r)?i.push({obj:new Ye(o.get(r)),path:s.concat([a+""])}):i.push({obj:r,path:s.concat([a+""])})}}else{let a=Object.keys(c),l=a.length,r=-1;for(;++r<l;){let u=c[a[r]];Et(u)&&o.has(u)?i.push({obj:new Ye(o.get(u)),path:s.concat(a[r])}):i.push({obj:u,path:s.concat(a[r])})}}}}var Vt=Symbol("pointer"),Dt=Symbol("fragmentId"),xt=Symbol("getter"),ne=class n{constructor(t){this.path=en(t)}static create(t){return new n(t)}static has(t,e){return(typeof e=="string"||Array.isArray(e))&&(e=new n(e)),e.has(t)}static get(t,e){return(typeof e=="string"||Array.isArray(e))&&(e=new n(e)),e.get(t)}static set(t,e,o,i=!1){return(typeof e=="string"||Array.isArray(e))&&(e=new n(e)),e.set(t,o,i)}static unset(t,e){return(typeof e=="string"||Array.isArray(e))&&(e=new n(e)),e.unset(t)}static decode(t){return nn(t)(t)}static visit(t,e,o=!1){Xe(t,e,o?Je:Qe)}static listPointers(t){let e=[];return Xe(t,(o,i)=>{e.push({pointer:o,value:i})},Qe),e}static listFragmentIds(t){let e=[];return Xe(t,(o,i)=>{e.push({fragmentId:o,value:i})},Je),e}static flatten(t,e=!1){let o={};return Xe(t,(i,c)=>{o[i]=c},e?Je:Qe),o}static map(t,e=!1){let o=new Map;return Xe(t,o.set.bind(o),e?Je:Qe),o}get(t){return this[xt]||(this[xt]=En(this.path)),this[xt](t)}set(t,e,o=!1){return Mn(t,e,this.path,o)}unset(t){return Hn(t,this.path)}has(t){return typeof this.get(t)!="undefined"}parent(t){let e=this.path;return e.length==1?void 0:new n(e.slice(0,e.length-1)).get(t)}relative(t){let e=this.path,o=Zt(t),i=parseInt(o[0]);if(i>e.length)throw new Error("Relative location does not exist.");let c=e.slice(0,e.length-i).concat(o.slice(1));if(o[0][o[0].length-1]=="#"){let s=c[c.length-1];throw new Error(`We won't compile a pointer that will always return '${s}'. Use JsonPointer.rel(target, ptr) instead.`)}return new n(c)}rel(t,e){let o=this.path,i=Zt(e),c=parseInt(i[0]);if(c>o.length)return;let s=o.slice(0,o.length-c).concat(i.slice(1)),a=new n(s);if(i[0][i[0].length-1]=="#"){let l=s[s.length-1],r=a.parent(t);return Array.isArray(r)?parseInt(l,10):l}return a.get(t)}concat(t){return new n(this.path.concat(t instanceof n?t.path:en(t)))}get pointer(){return this[Vt]===void 0&&(this[Vt]=Qe(this.path)),this[Vt]}get uriFragmentIdentifier(){return this[Dt]||(this[Dt]=Je(this.path)),this[Dt]}toString(){return this.pointer}},gt=Symbol("pointer"),Ye=class{constructor(t){this[gt]=t instanceof ne?t:new ne(t),this.$ref=this[gt].uriFragmentIdentifier}static isReference(t){if(!t)return!1;let e=t;return typeof e.$ref=="string"&&typeof e.resolve=="function"}resolve(t){return this[gt].get(t)}pointer(){return this[gt]}toString(){return this.$ref}};var ht=()=>{let n,t;function e(o){typeof o.refs.submitResult=="undefined"?(n=void 0,t=void 0):(typeof n=="undefined"||o.refs.submitResult.ok!==n.ok||o.refs.submitResult.status!==n.status||o.refs.submitResult.value!==n.value)&&(n=o.refs.submitResult,t=oe({value:n.value,store:o.refs.store,typeDefs:o.refs.typeDefs}))}return{oninit:({attrs:o})=>{e(o)},onbeforeupdate:({attrs:o})=>{e(o)},view:({attrs:{type:o,selector:i,args:c,view:s},children:a})=>{if(o==="initial"&&typeof n=="undefined")return a;if(typeof n=="undefined"||typeof t!="function")return null;let l=o==="success"&&n.ok||o==="failure"&&!n.ok;return l&&i!=null&&c!=null&&s!=null?t.select(i,c,s):l&&typeof s=="function"?s(t):l&&typeof c!="undefined"?t.present(c):null}}};var sn=Jn(rn());function Mt({payload:n,action:t,store:e}){let o,i,c="get",s,a,l=t["https://schema.org/target"];if(Array.isArray(l)){for(let f of l)if(f==="string"){l=f;break}else if(j(l)&&(l["https://schema.org/contentType"]==null||l["https://schema.org/contentType"]==="mutipart/form-data"||l["https://schema.org/contentType"]==="application/ld+json")){l=f;break}}if(typeof l=="string"?o=l:j(l)&&(typeof l["https://schema.org/urlTemplate"]=="string"&&(o=l["https://schema.org/urlTemplate"]),typeof l["https://schema.org/httpMethod"]=="string"&&(c=l["https://schema.org/httpMethod"].toLowerCase()),typeof l["https://schema.org/contentType"]=="string"&&(s=l["https://schema.org/contentType"]),typeof l["https://schema.org/encodingType"]=="string"&&(a=l["https://schema.org/encodingType"])),typeof o!="string")throw new Error("Action has invalid https://schema.org/target");let u=(0,sn.default)(o).fill(n);if(c!=="get"&&c!=="delete"){let f={};for(let[m,p]of Object.entries(n))f[e.expand(m)]=p}return{url:u,method:c,contentType:s,encodingType:a,body:i}}import Un from"mithril";var ke=typeof window!="undefined";function x(){ke&&Un.redraw()}import Ze from"mithril";function cn(){let n=function(t,e){return t(n)?e:null};return n.isOctiron=!0,n.not=function(t,e){return n==null||t(n)?null:e},n}function ln(n,t){var l;let e=Object.assign({},t),o=n.store.key(),i=Object.assign({},t);function c(r){return n.onUpdate(n.pointer,r,{throttle:i.throttle,debounce:i.debounce,submitOnChange:i.submitOnChange})}let s=cn();s.octironType="action-selection",s.readonly=n.spec==null?!0:n.spec.readonlyValue||!1,s.store=n.store,s.id=o,s.inputName=n.datatype,s.submitting=n.submitting,s.value=(l=n.value)!=null?l:t.initialValue,s.action=n.action;function a(r,u,f,m){let p=s.value;if(!j(p)){console.warn("Non object action change intercepted.");return}let d=Object.assign({},p),y=ne.create(r);u==null?y.unset(d):y.set(d,u,!0),typeof m=="function"&&(d=m(d,p,n.actionValue)),n.onUpdate(n.pointer,d,f)}return s.update=function(r,u){return D(this,null,function*(){let f=s.value;if(!j(f))throw new Error("Cannot call update on a non object selection instance");typeof r=="function"?c(r(f)):r!=null&&c(r),u!=null&&u.submit||u!=null&&u.submitOnChange?yield n.onSubmit():x()})},s.submit=function(){return n.onSubmit()},s.root=function(r,u,f){let m,[p,d,y]=E(r,u,f);return p==null?m=n.store.rootIRI:m=`${n.store.rootIRI} ${p}`,Ze(G,{selector:m,args:d,view:y,internals:{store:n.store,typeDefs:(d==null?void 0:d.typeDefs)||(e==null?void 0:e.typeDefs)||n.typeDefs,parent:s}})},s.select=function(r,u,f){if(!j(s.value))return null;let[m,p,d]=E(r,u,f),y=(h,O,S)=>{a(h,O,S,p.interceptor)};return Ze(Ot,{internals:{submitting:n.submitting,entity:n.entity,action:n.action,parent:s,store:n.store,typeDefs:n.typeDefs,onSubmit:n.onSubmit,onUpdate:y},selector:m,value:s.value,actionValue:n.actionValue,args:p,view:d})},s.enter=function(r,u,f){let[m,p,d]=E(r,u,f);return Ze(G,{selector:m,args:p,view:d,internals:{store:n.store,typeDefs:(p==null?void 0:p.typeDefs)||(e==null?void 0:e.typeDefs)||n.typeDefs,parent:s}})},s.present=r=>{let u={},f,m;(r==null?void 0:r.attrs)!=null?u=r.attrs:(e==null?void 0:e.attrs)!=null&&(u=e.attrs),(r==null?void 0:r.component)!=null?f=r.component:(r==null?void 0:r.component)!==null&&(e==null?void 0:e.component)!=null&&(f=e.component),(r==null?void 0:r.fallbackComponent)!=null?m=r.fallbackComponent:(e==null?void 0:e.fallbackComponent)!=null&&(m=e.fallbackComponent);let p=ye({style:"present",type:ge(n.value),firstPickComponent:f,fallbackComponent:m,typeDefs:(r==null?void 0:r.typeDefs)||n.typeDefs||{}});return p==null?null:Ze(p,{o:s,renderType:"present",value:s.value,attrs:u})},s.edit=function(r){if(s.readonly)return s.present(r);let u={},f,m;(r==null?void 0:r.attrs)!=null?u=r.attrs:(e==null?void 0:e.attrs)!=null&&(u=e.attrs),(r==null?void 0:r.component)!=null?f=r.component:(r==null?void 0:r.component)!==null&&(e==null?void 0:e.component)!=null&&(f=e.component),(r==null?void 0:r.fallbackComponent)!=null?m=r.fallbackComponent:(e==null?void 0:e.fallbackComponent)!=null&&(m=e.fallbackComponent);let p=ye({style:"edit",datatype:n.datatype,type:ge(s.value),firstPickComponent:f,fallbackComponent:m,typeDefs:(r==null?void 0:r.typeDefs)||n.typeDefs||{}});if(p==null)return null;let d=(y,h)=>n.onUpdate(n.pointer,y,h);return Ze(p,{o:s,required:!0,readonly:!1,renderType:"edit",name:s.inputName,value:s.value,attrs:u,onchange:d,onChange:d})},s.default=function(r){return s.edit(Object.assign({component:null},r))},s.initial=function(r){return n.action.initial(r)},s.success=function(r,u,f){return n.action.success(r,u,f)},s.failure=function(r,u,f){return n.action.failure(r,u,f)},s.remove=function(r={}){n.onUpdate(n.pointer,null,r)},s.append=function(r,u={},f={}){let m=n.store.expand(r);if(j(s.value)){let p=s.value[m],d=[];return p!=null&&!Array.isArray(p)?d.push(p):Array.isArray(p)&&(d=[...p]),d.push(u),n.onUpdate(n.pointer,Y(H({},s.value),{[m]:d}),f)}},s._updateInternals=function(r){for(let[u,f]of Object.entries(r))n[u]=f},s._updateArgs=function(r){for(let[u,f]of Object.entries(r))e[u]=f},s}function an(...n){return`${n.map(e=>e.replace(/~/g,"~0").replace(/\//g,"~1")).join("/")}`}function Ve(n){return Array.isArray(n)?n:Array.isArray(n["@list"])?n["@list"]:Array.isArray(n["@set"])?n["@set"]:[]}function W(n){return j(n)&&typeof n["@id"]=="string"&&n["@id"]!==""}function he(n){if(Array.isArray(n))return!0;if(j(n)){if(Array.isArray(n["@list"]))return!0;if(Array.isArray(n["@set"]))return!0}return!1}function ae(n){let t=Object.keys(n);if(t.length===0)return!1;for(let e of t)if(!e.startsWith("@")||e==="@value"||e==="@list"||e==="@set")return!1;return!0}function De(n){return typeof n["@value"]!="undefined"}var $n=new RegExp("\\s*(?<subject>([^\\[\\s]+))(\\[(?<filter>([^\\]])+)\\])?\\s*","g");function Ht(n,t){var i,c;let e,o=[];for(;e=$n.exec(n);){let s=(i=e.groups)==null?void 0:i.subject,a=(c=e.groups)==null?void 0:c.filter;if(typeof a=="string"&&typeof s=="string")o.push({subject:t.expand(s),filter:a});else if(typeof s=="string")o.push({subject:t.expand(s)});else throw new Error(`Invalid selector: ${n}`)}return o}var Bn=/^https?\:\/\//,un=/^https?\:\/\/schema\.org/,qn=new RegExp("^https?\\:\\/\\/schema\\.org\\/(?<term>(readonlyValue|valueName|valueRequired|defaultValue|minValue|maxValue|stepValue|valuePattern|multipleValues|valueMinLength|valueMaxLength))");function fn({spec:n,store:t}){var c;let e={readonlyValue:!1,valueRequired:!1},o,i=t.vocab==null?!1:un.test(t.vocab);for(let[s,a]of Object.entries(t.aliases))if(un.test(a)){o=[s,a];break}for(let[s,a]of Object.entries(n)){let l;if(Bn.test(s)?l=s:i&&!s.includes(":")?l=`${t.vocab}${s}`:o&&s.startsWith(`${o[0]}:`)&&(l=s.replace(`${o[0]}:`,o[1])),!l)continue;let r=qn.exec(l);(c=r==null?void 0:r.groups)!=null&&c.term&&(e[r.groups.term]=a)}return e}var Lt=class extends Error{};function pn(n){for(let t=0;t<n.result.length;t++){let e=n.result[t];e.key=Symbol.for(e.keySource),delete e.keySource}return n}function xe({selector:n,value:t,actionValue:e,store:o}){let i={selector:n,complete:!1,hasErrors:!1,hasMissing:!1,required:[],dependencies:[],result:[]};if(t==null){let[{subject:s,filter:a},...l]=Ht(n,o);return tt({keySource:"",pointer:"",iri:s,filter:a,selector:l.length>0?l:void 0,store:o,details:i}),i.complete=i.required.length===0,pn(i)}let c=Ht(n,o);et({keySource:"",pointer:"",value:t,actionValue:e,selector:c,store:o,details:i}),i.complete=i.required.length===0;for(let s=0;s<i.result.length;s++){let a=i.result[s];a.key=Symbol.for(a.keySource)}return pn(i)}function _(n,t){return`${n}/${an(t.toString())}`}function Ft({value:n,filter:t}){return typeof t!="string"?!0:Array.isArray(n["@type"])?n["@type"].includes(t):n["@type"]===t}function Ut(n){return n!==null&&typeof n!="undefined"&&typeof n!="boolean"&&typeof n!="number"&&typeof n!="string"}function bt({keySource:n,pointer:t,value:e,datatype:o,filter:i,spec:c,actionValue:s,store:a,details:l}){if(e===void 0){l.hasMissing=!0;return}if(c!=null&&(!he(e)||!j(s))){let r=fn({spec:c,store:a});j(e)&&De(e)&&(e=e["@value"]),l.result.push({keySource:t,pointer:t,type:"action-value",datatype:o,value:e,actionValue:s,spec:r,readonly:r.readonlyValue});return}if(Ut(e)){if(he(e)){let r=Ve(e);for(let u=0;u<r.length;u++){let f=r[u];if(W(f)||(n=_(n,u)),bt({keySource:n,pointer:_(t,u),value:f,spec:c,actionValue:s,datatype:o,filter:i,store:a,details:l}),l.hasErrors||l.hasMissing)return}return}}else{l.result.push({keySource:t,pointer:t,type:"value",datatype:o,value:e});return}if(!(typeof i=="string"&&!Ft({value:e,filter:i}))){if(De(e)){bt({keySource:n,pointer:t,value:e["@value"],datatype:o,store:a,details:l});return}else if(ae(e)){tt({keySource:n,pointer:t,iri:e["@id"],filter:i,store:a,details:l});return}if(W(e)){let r=e["@id"];l.result.push({keySource:n,pointer:t,type:"entity",iri:r,ok:!0,value:e});return}l.result.push({keySource:n,pointer:t,type:"value",datatype:o,value:e})}}function mn({keySource:n,pointer:t,type:e,value:o,actionValue:i,filter:c,store:s,details:a}){if(t=_(t,e),!Ut(o))return;if(he(o)){let r=Ve(o);for(let u=0;u<r.length;u++){let f=r[u];if(W(f)||(n=_(n,u)),mn({keySource:n,pointer:_(t,u),type:e,value:f,actionValue:i,filter:c,store:s,details:a}),a.hasErrors||a.hasMissing)return}return}if(ae(o)&&W(o)){tt({keySource:n,pointer:t,iri:o["@id"],selector:[{subject:e,filter:c}],store:s,details:a});return}else if(ae(o))return;let l;j(i)&&i[`${e}-input`]==null||(j(i)&&(l=i[`${e}-input`]),bt({keySource:n,pointer:t,value:o[e],spec:l,actionValue:i==null?void 0:i[e],datatype:e,filter:c,store:s,details:a}))}function et({keySource:n,pointer:t,selector:e,value:o,actionValue:i,store:c,details:s}){if(e.length===0)return;if(!Ut(o))return;if(he(o)){let m=Ve(o);for(let p=0;p<m.length;p++){let d=m[p];if(W(d)||(n=_(n,p)),et({keySource:n,pointer:_(t,p),selector:e,value:d,actionValue:i,store:c,details:s}),s.hasErrors||s.hasMissing)return}return}else De(o)&&et({keySource:n,pointer:t,selector:e,value:o["@value"],actionValue:i,store:c,details:s});if(ae(o)&&W(o)){tt({keySource:n,pointer:t,selector:e,iri:o["@id"],store:c,details:s});return}j(o)&&i!==void 0&&o[e[0].subject]==null&&(o={[e[0].subject]:null});let[a,...l]=e,{subject:r,filter:u}=a;if(o[r]===void 0){s.hasMissing=!0;return}if(l.length===0&&j(i==null?void 0:i[r])){t=_(t,r),bt({keySource:t,pointer:t,value:o[r],datatype:r,details:s,store:c,actionValue:i==null?void 0:i[r],spec:i[`${r}-input`],filter:u});return}else if(l.length===0){mn({keySource:n,pointer:t,type:r,filter:u,value:o,actionValue:i,store:c,details:s});return}if(typeof u=="string"&&!Ft({value:o,filter:u}))return;let f;j(i==null?void 0:i[r])&&(f=i[r]),et({keySource:_(n,r),pointer:_(t,r),selector:l,value:o[r],actionValue:f,store:c,details:s})}function tt({keySource:n,pointer:t,iri:e,filter:o,selector:i,store:c,details:s,handledIRIs:a}){n=_(n,e),t=_(t,e);let l=c.entity(e);if(s.dependencies.push(e),l==null||l.loading){s.required.includes(e)||s.required.push(e);return}if(!l.ok){if(s.hasErrors=!0,i==null||i.length===0)return;s.result.push({keySource:n,pointer:t,type:"entity",iri:l.iri,ok:!1,status:l.status,value:l.value,reason:l.reason});return}let r=l.value;if(ae(r)){if(a==null)a=new Set([r["@id"]]);else if(!a.has(r["@id"]))a.add(r["@id"]);else throw new Lt("Circular selection loop detected");return tt({keySource:n,pointer:t,iri:r["@id"],filter:o,selector:i,details:s,store:c,handledIRIs:a})}if(!(typeof o=="string"&&!Ft({filter:o,value:r}))){if(typeof i=="undefined"){s.result.push({keySource:n,pointer:t,type:"entity",iri:l.iri,ok:!0,value:l.value});return}et({keySource:n,pointer:t,value:r,selector:i,store:c,details:s})}}var Ot=n=>{let t=n.attrs,e,o={};function i(){let s=!1,a=[];for(let r of e.result){if(a.push(r.pointer),o[r.pointer]!=null){let p=r,d=o[r.pointer].selectionResult;if(p.value===d.value)continue;let y=Object.assign({},o[r.pointer].internals);y.name=r.datatype,y.type=r.type,y.datatype=r.datatype,y.pointer=r.pointer,y.value=r.value,y.actionValue=r.actionValue,r.spec!=null&&(y.spec=r.spec),o[r.pointer].octiron._updateInternals(y)}s=!0;let u=oe({store:t.internals.store,typeDefs:t.internals.typeDefs,datatype:r.datatype,value:r.value}),f=Y(H({},t.internals),{octiron:u,name:r.datatype,type:r.type,datatype:r.datatype,pointer:r.pointer,spec:r.spec,value:r.value,actionValue:r.actionValue}),m=ln(f,t.args);o[r.pointer]={internals:f,selection:u,octiron:m,selectionResult:r}}let l=Object.keys(o);for(let r of l)a.includes(r)||(s=!0,delete o[r]);s&&typeof window!="undefined"&&x()}function c(){let{selector:s,value:a,actionValue:l}=t,{store:r}=t.internals;j(a)&&(e=xe({selector:s,store:r,actionValue:l,value:a}),i())}return{oninit:({attrs:s})=>{t=s,c()},onbeforeupdate:({attrs:s})=>{t=s;for(let a of Object.values(o))a.octiron._updateArgs(s.args),a.octiron._updateInternals(s.internals);c()},view:({attrs:{view:s,args:a}})=>{if(e==null)return null;let{pre:l,sep:r,post:u,fallback:f}=a;if(typeof s=="undefined")return;let m=Object.values(o),p=[l];for(let d=0;d<m.length;d++){let{octiron:y,selectionResult:h}=m[d];d!==0&&p.push(r),h.value==null&&typeof f=="function"?p.push(null):h.value==null&&f!=null?p.push(f):p.push(s(y))}return p.push(u),p}}};function dn(n,t){let e=Object.assign({},t),o={},i;if(j(t.initialPayload))for(let[p,d]of Object.entries(t.initialPayload))o[n.store.expand(p)]=d;let{url:c,method:s,body:a}=Mt({payload:o,action:n.octiron.value,store:n.store});a==null&&(i=n.store.entity(c));let l={url:c,method:s,submitting:!1,payload:o,store:n.store,typeDefs:n.typeDefs,submitResult:i};function r(){return D(this,null,function*(){let{url:p,method:d,body:y,contentType:h,encodingType:O}=Mt({payload:o,action:n.octiron.value,store:n.store});try{l.submitting=!0,x(),l.submitResult=yield n.store.submit(p,{method:d,body:y,contentType:h,encodingType:O})}catch(S){console.error(S)}l.submitting=!1,x()})}function u(p){let d=o,y=H(H({},d),p);typeof t.interceptor=="function"?o=t.interceptor(y,d,n.octiron.value):o=y,m.value=l.payload=p,x()}function f(p,d){let y=Object.assign({},o),h=ne.create(p);typeof d=="undefined"||d===null?h.unset(y):h.set(y,d,!0),u(y)}let m=function p(d,y){return d(p)?y:null};return m.isOctiron=!0,m.octironType="action",m.readonly=!1,m.value=l.payload,m.action=n.octiron,m.actionValue=n.octiron,m.submit=function(p){return D(this,null,function*(){return typeof p=="function"?u(p(o)):p!=null&&u(p),yield r()})},m.update=function(p,d){return D(this,null,function*(){typeof p=="function"?u(p(o)):p!=null&&u(p),d!=null&&d.submit||d!=null&&d.submitOnChange?yield r():x()})},m.not=function(p,d){return m==null||p(m)?null:d},m.root=function(p,d,y){let h,[O,S,w]=E(p,d,y);return O==null?h=n.store.rootIRI:h=`${n.store.rootIRI} ${O}`,ue(G,{selector:h,args:S,view:w,internals:{store:n.store,typeDefs:(S==null?void 0:S.typeDefs)||(e==null?void 0:e.typeDefs)||n.typeDefs,parent:m}})},m.enter=function(p,d,y){let[h,O,S]=E(p,d,y);return ue(G,{selector:h,args:O,view:S,internals:{store:n.store,typeDefs:(O==null?void 0:O.typeDefs)||(e==null?void 0:e.typeDefs)||n.typeDefs,parent:m}})},m.present=function(p){let d={},y,h;(p==null?void 0:p.attrs)!=null?d=p.attrs:(e==null?void 0:e.attrs)!=null&&(d=e.attrs),(p==null?void 0:p.component)!=null?y=p.component:(e==null?void 0:e.component)!=null&&(y=e.component),(p==null?void 0:p.fallbackComponent)!=null?h=p.fallbackComponent:(e==null?void 0:e.fallbackComponent)!=null&&(h=e.fallbackComponent);let O=ye({style:"present",type:ge(n.octiron.value),firstPickComponent:y,fallbackComponent:h,typeDefs:(p==null?void 0:p.typeDefs)||n.typeDefs||{}});if(O==null)return null;let{pre:S,sep:w,post:V,start:k,end:U,predicate:L}=Object.assign({},e,p);return ue(O,{o:m,renderType:"present",value:m.value,attrs:d,pre:S,sep:w,post:V,start:k,end:U,predicate:L})},m.default=function(p){return m.present(p)},m.initial=function(p){return ue(ht,{type:"initial",refs:l},p)},m.success=function(p,d,y){let[h,O,S]=E(p,d,y);return ue(ht,{type:"success",selector:h,args:O,view:S,refs:l})},m.failure=function(p,d,y){let[h,O,S]=E(p,d,y);return ue(ht,{type:"failure",selector:h,args:O,view:S,refs:l})},m.select=function(p,d,y){let[h,O,S]=E(p,d,y);return ue(Ot,{internals:{action:m,parent:m,entity:n.octiron,store:n.store,typeDefs:n.typeDefs,onSubmit:r,onUpdate:f,submitting:l.submitting},selector:h,value:m.value,actionValue:n.octiron.value,args:O,view:S})},m.perform=function(p,d,y){let[h,O,S]=E(p,d,y);return ue(At,{selector:h,args:O,view:S,internals:{octiron:m,store:n.store,typeDefs:n.typeDefs}})},m.append=function(p,d={},y={}){let h=n.store.expand(p);if(j(m.value)){let O=m.value[h],S=[];return O!=null&&!Array.isArray(O)?S.push(O):Array.isArray(O)&&(S=[...O]),S.push(d),m.update(Y(H({},m.value),{[h]:S}),y)}},m._updateArgs=function(p){for(let[d,y]of Object.entries(p))e[d]=y},(typeof window=="undefined"&&t.submitOnInit&&i==null||typeof window!="undefined"&&t.submitOnInit)&&m.submit(),m}var At=({attrs:n})=>{let t=Symbol(),e=n,o,i={};function c(){let r=!1,u=[];for(let m of o.result){if(u.push(m.pointer),Object.hasOwn(i,m.pointer)){let y=m,h=i[m.pointer].selectionResult;if(h.type==="value"&&y.type==="value"&&y.value===h.value)continue;if(h.type==="entity"&&y.type==="entity"&&(y.ok!==h.ok||y.status!==h.status||y.value!==h.value))continue}r=!0;let p=oe({store:e.internals.store,typeDefs:e.internals.typeDefs,value:m.value}),d=dn(e.internals,e.args);i[m.pointer]={action:d,octiron:p,selectionResult:m}}let f=Object.keys(i);for(let m of f)u.includes(m)||(r=!0,delete i[m]);r&&x()}function s(r){return D(this,null,function*(){if(r.length===0)return;let u=[];for(let f of r)u.push(e.internals.store.fetch(f));yield Promise.allSettled(u)})}function a(r){let u=[];if(typeof o=="undefined")u=r.required;else for(let f of r.required)o.required.includes(f)||u.push(f);o=r,u.length>0&&s(u),c()}function l(){let{selector:r,internals:u}=e;if(typeof r=="undefined"){let f;W(u.octiron.value)?f={pointer:"/local",key:Symbol.for("/local"),type:"entity",iri:u.octiron.value["@id"],ok:!0,value:u.octiron.value}:f={pointer:"/local",key:Symbol.for("/local"),type:"value",value:u.octiron.value},o={selector:"",complete:!0,hasErrors:!1,hasMissing:!1,dependencies:[],required:[],result:[f]}}else o=u.store.subscribe({key:t,selector:r,value:u.octiron.value,listener:a}),s(o.required);c()}return{oninit:({attrs:r})=>{e=r,l()},onbeforeupdate:({attrs:r})=>{r.selector!==e.selector&&(r.internals.store.unsubscribe(t),l()),e=r;for(let u of Object.values(i))u.action._updateArgs(r.args)},onbeforeremove:({attrs:r})=>{e=r,r.internals.store.unsubscribe(t)},view:({attrs:{view:r,args:u}})=>{if(o==null||!o.complete)return u.loading;let{pre:f,sep:m,post:p,fallback:d}=u;if(typeof r=="undefined")return;let y=Object.values(i),h=[f];for(let O=0;O<y.length;O++){let{selectionResult:S,action:w,octiron:V}=y[O];O!==0&&h.push(m),S.type==="value"?h.push(r(w)):!S.ok&&typeof d=="function"?h.push(d(V,S.reason)):S.ok?h.push(r(w)):h.push(d)}return h.push(p),h}}};function oe(n,t){let e=Object.assign({},t),o=ge(n.value),i={isOctiron:!0,octironType:"selection",value:n.value},c=Object.assign((s,a)=>s(c)?a:null,{isOctiron:!0,octironType:"selection",readonly:!0,id:n.datatype,get value(){return i.value},get store(){return n.store},not:(s,a)=>s(c)?null:a,root:(s,a,l)=>{let r,[u,f,m]=E(s,a,l);return u==null?r=n.store.rootIRI:r=`${n.store.rootIRI} ${u}`,nt(G,{selector:r,args:f,view:m,internals:{store:n.store,typeDefs:(f==null?void 0:f.typeDefs)||n.typeDefs,parent:c}})},enter(s,a,l){let[r,u,f]=E(s,a,l);return nt(G,{selector:r,args:u,view:f,internals:{store:n.store,typeDefs:(u==null?void 0:u.typeDefs)||n.typeDefs,parent:c}})},select:(s,a,l)=>{let[r,u,f]=E(s,a,l);return j(n.value)?nt(G,{selector:r,args:u,view:f,internals:{store:n.store,typeDefs:(u==null?void 0:u.typeDefs)||n.typeDefs,value:n.value,parent:c}}):null},present(s){let a={},l,r;(s==null?void 0:s.attrs)!=null?a=s.attrs:(e==null?void 0:e.attrs)!=null&&(a=e.attrs),(s==null?void 0:s.component)!=null?l=s.component:(e==null?void 0:e.component)!=null&&(l=e.component),(s==null?void 0:s.fallbackComponent)!=null?r=s.fallbackComponent:(e==null?void 0:e.fallbackComponent)!=null&&(r=e.fallbackComponent);let u=ye({style:"present",datatype:n.datatype,type:o,firstPickComponent:l,fallbackComponent:r,typeDefs:(s==null?void 0:s.typeDefs)||n.typeDefs||{}});if(u==null)return null;let{pre:f,sep:m,post:p,start:d,end:y,predicate:h}=Object.assign({},e,s);return nt(u,{o:c,renderType:"present",value:c.value,attrs:a,pre:f,sep:m,post:p,start:d,end:y,predicate:h})},default(s){return c.present(s)},perform:(s,a,l)=>{let[r,u,f]=E(s,a,l);return nt(At,{selector:r,args:u,view:f,internals:{octiron:c,store:n.store,typeDefs:u.typeDefs||n.typeDefs}})},_updateArgs:s=>{for(let[a,l]of Object.entries(s))e[a]=l},_updateValue:s=>{i.value=s}});return c}var Kn=Symbol.for("@pre"),Gn=Symbol.for("@post");function _n(n,t){return n.internals.store!==t.internals.store||n.selector!==t.selector||n.internals.value!==t.internals.value}var G=n=>{let t=Symbol("SelectionRenderer"),e=n.attrs,o,i={};function c(){let r=!1,{store:u,typeDefs:f,parent:m}=e.internals,p=[];if(o==null){let y=Reflect.ownKeys(i);for(let h of y)p.includes(h)||(r=!0,delete i[h]);r&&x();return}for(let y of o.result){let h=Symbol.for(y.pointer);if(p.push(h),Object.hasOwn(i,h)){let S=y,w=i[h].selectionResult;if(w.type==="value"&&S.type==="value"&&S.value===w.value)continue;if(w.type==="entity"&&S.type==="entity"&&(S.ok!==w.ok||S.status!==w.status||S.value!==w.value))continue}r=!0;let O;y.type==="entity"?O=oe({store:u,typeDefs:f,value:y.value,parent:m}):O=oe({store:u,typeDefs:f,value:y.value,datatype:y.datatype,parent:m}),i[h]={octiron:O,selectionResult:y}}let d=Reflect.ownKeys(i);for(let y of d)p.includes(y)||(r=!0,delete i[y]);r&&x()}function s(r){return D(this,null,function*(){if(r.length===0)return;let u=[];for(let f of r)u.push(e.internals.store.fetch(f));yield Promise.allSettled(u)})}function a(r){let u=[];if(typeof o=="undefined")u=r.required;else for(let f of r.required)o.required.includes(f)||u.push(f);o=r,u.length>0&&s(u),c()}function l(){if(typeof e.internals.value!="undefined"&&!j(e.internals.value)){e.internals.store.unsubscribe(t),c();return}o=e.internals.store.subscribe({key:t,selector:e.selector,value:e.internals.value,listener:a}),s(o.required),c()}return{oninit:({attrs:r})=>{e=r,l()},onbeforeupdate:({attrs:r})=>{let u=_n(r,e);e=r,u&&(r.internals.store.unsubscribe(t),l())},onbeforeremove:({attrs:r})=>{e=r,r.internals.store.unsubscribe(t)},view:({attrs:r})=>{if(o==null||!o.complete)return r.args.loading;if((o.hasErrors||o.hasMissing)&&typeof r.args.fallback!="function")return r.args.fallback;let u=e.view,{pre:f,sep:m,post:p,start:d,end:y,predicate:h,fallback:O}=e.args;if(typeof u=="undefined")return;let S=[],w=Reflect.ownKeys(i).map(V=>i[V]);(d!=null||y!=null)&&(w=w.slice(d!=null?d:0,y)),h!=null&&(w=w.filter(({octiron:V})=>h(V))),f!=null&&S.push(Se.fragment({key:Kn},[f]));for(let V=0;V<w.length;V++){let{selectionResult:k,octiron:U}=w[V],{key:L}=k;V!==0&&S.push(Se.fragment({key:`@${Symbol.keyFor(L)}`},[m])),k.type==="value"?S.push(Se.fragment({key:L},[u(U)])):!k.ok&&typeof O=="function"?S.push(Se.fragment({key:L},[O(U,k.reason)])):k.ok?S.push(Se.fragment({key:L},[u(U)])):S.push(Se.fragment({key:L},[O]))}return p!=null&&S.push(Se.fragment({key:Gn},[p])),S}}};function $t(n){let t=Object.assign((e,o)=>t.root(i=>i(e,o)),{octironType:"root",isOctiron:!0,readonly:!0,value:null,store:n.store,not(e,o){return t.root(i=>i.not(e,o))},root(e,o,i){let c,[s,a,l]=E(e,o,i);return s==null?c=n.store.rootIRI:c=`${n.store.rootIRI} ${s}`,Wn(G,{selector:c,args:a,view:l,internals:{store:n.store,typeDefs:(a==null?void 0:a.typeDefs)||n.typeDefs}})},select(e,o,i){return t.root(e,o,i)},present(e,o){return t.root(e,o)},default(e){return t.root(o=>o.default(e))},perform(e,o,i){return typeof e=="string"?t.root(e,c=>c.perform(o,i)):t.root(c=>c.perform(o,i))}});return t}import yn from"mithril";var zn=()=>({view({attrs:{fragment:n,rootHTML:t,fragmentsHTML:e}}){let o=n==null?t:e[n];return o==null?null:yn.trust(o)}}),wt,vt,re,Bt,ie,fe,Ne,Ee,ot,Rt=class Rt{constructor(t,{iri:e,contentType:o,root:i,ided:c,anon:s}){Ie(this,"integrationType","html-fragments");R(this,wt);R(this,vt,new Set);R(this,re);R(this,Bt);R(this,ie);R(this,fe);R(this,Ne);R(this,Ee);R(this,ot);J(this,wt,t),J(this,re,e),J(this,ie,o),J(this,fe,i),J(this,Ne,c!=null?c:{}),J(this,Ee,s!=null?s:{}),J(this,ot,H(H({},s),c))}get iri(){return g(this,re)}get contentType(){return g(this,ie)}render(t){return yn(zn,{o:t,rootHTML:g(this,fe),fragmentsHTML:g(this,ot)})}getStateInfo(){return{iri:g(this,re),contentType:g(this,ie),hasRoot:g(this,fe)!=null,ided:Object.keys(g(this,Ne)),anon:Object.keys(g(this,Ee))}}toInitialState(){let t="";g(this,fe)!=null&&(t+=`<template id="htmlfrag:${g(this,re)}|${g(this,ie)}">${g(this,fe)}</template>
`);for(let[e,o]of Object.entries(g(this,Ne)))g(this,vt).has(e)||(t+=`<template id="htmlfrag:${g(this,re)}|${g(this,ie)}|${e}">${o}</template>
`);for(let[e,o]of Object.entries(g(this,Ee)))t+=`<template id="htmlfrag:${g(this,re)}#${e}|${g(this,ie)}">${o}</template>
`;return t}static fromInitialState(t,{iri:e,contentType:o,hasRoot:i,ided:c,anon:s}){let a,l={},r={};if(i){let u=document.getElementById(`htmlfrag:${e}|${o}`);u&&(a=u.outerHTML)}for(let u of c){let f=document.getElementById(u);if(f instanceof HTMLTemplateElement){let m=f.cloneNode(!0);l[u]=m.innerHTML}else l[u]=f.innerHTML}for(let u of s){let f=document.getElementById(`htmlfrag:${e}#${u}|${o}`);if(f instanceof HTMLTemplateElement){let m=f.cloneNode(!0);l[u]=m.innerHTML}else l[u]=f.innerHTML}return new Rt(t,{contentType:o,iri:e,root:a,ided:l,anon:r})}};wt=new WeakMap,vt=new WeakMap,re=new WeakMap,Bt=new WeakMap,ie=new WeakMap,fe=new WeakMap,Ne=new WeakMap,Ee=new WeakMap,ot=new WeakMap,Ie(Rt,"type","html-fragments");var Me=Rt;import gn from"mithril";var Qn=()=>{let n;return{oncreate({dom:t,attrs:{o:e,el:o,handler:i}}){o!=null&&t.append(o),i.onCreate!=null&&(n=i.onCreate({o:e,dom:t,addFragmentListener:()=>{}}))},onbeforeremove(){n!=null&&n()},view({attrs:{html:t,el:e}}){return e!=null?null:gn.trust(t)}}},it,He,Oe,be,Le,Fe,st,rt=class rt{constructor(t,{iri:e,contentType:o,html:i,id:c,el:s}){Ie(this,"integrationType","html");R(this,it);R(this,He,!1);R(this,Oe);R(this,be);R(this,Le);R(this,Fe);R(this,st);J(this,it,t),J(this,Oe,e),J(this,be,o),J(this,Le,i),J(this,Fe,c),J(this,st,s)}get iri(){return g(this,Oe)}get contentType(){return g(this,be)}render(t){return!ke&&!g(this,He)&&J(this,He,!0),gn(Qn,{o:t,html:g(this,Le),el:g(this,st),handler:g(this,it)})}getStateInfo(){return{iri:g(this,Oe),contentType:g(this,be),id:g(this,Fe)}}toInitialState(){return g(this,Fe)!=null&&g(this,He)?"":`<template id="html:${g(this,Oe)}|${g(this,be)}">${g(this,Le)}</template>
`}static fromInitialState(t,{iri:e,contentType:o,id:i}){let c=null;return i!=null&&(c=document.getElementById(i)),c!=null?new rt(t,{iri:e,contentType:o,html:c.outerHTML,id:i,el:c}):(c=document.getElementById(`html:${e}|${o}`),c instanceof HTMLTemplateElement?(c=c.cloneNode(!0),new rt(t,{iri:e,contentType:o,html:c.outerHTML,id:i,el:c})):null)}};it=new WeakMap,He=new WeakMap,Oe=new WeakMap,be=new WeakMap,Le=new WeakMap,Fe=new WeakMap,st=new WeakMap,Ie(rt,"type","html");var Ue=rt;var $e,ct,Ct=class{constructor(t,e){R(this,$e);R(this,ct);J(this,$e,t),J(this,ct,e)}get status(){return g(this,$e)}get res(){return g(this,ct)}undefined(){return null}http(t){return typeof t=="function"?t(g(this,$e)):t}unparserable(){return null}};$e=new WeakMap,ct=new WeakMap;function pe(n,t=[]){if(Array.isArray(n))for(let e of n)pe(e,t);else if(j(n)){if(ae(n))return t;if(W(n)&&t.push(n),De(n))pe(n["@value"],t);else if(he(n))pe(Ve(n),t);else for(let[e,o]of Object.entries(n))e.startsWith("@")||pe(o,t)}return t}var Ae="application/problem+json, application/ld+json, text/lf",Xn={[Ue.type]:Ue,[Me.type]:Me};function Yn(n,t){let e=new Map,o={};if(n!=null&&(o["@vocab"]=n),t==null)return[e,o];for(let[i,c]of Object.entries(t))o[i]=c,e.set(i,c);return[e,o]}function Zn(n,t){let e=new Headers([["accept",Ae]]),o=new Map;if(n!=null)for(let[i,c]of Object.entries(n))e.set(i,c);if(t!=null)for(let[i,c]of Object.entries(t)){let s=new Headers([["accept",Ae]]);for(let[a,l]of Object.entries(c))s.set(a,l);o.set(i,s)}return[e,o]}var Be,lt,se,we,me,ve,z,qe,de,at,ut,ft,pt,Ke,Ge,te,Re,F,qt,Kt,Gt,hn,_t,Wt=class Wt{constructor(t){R(this,F);R(this,Be);R(this,lt);R(this,se);R(this,we);R(this,me);R(this,ve);R(this,z,new Map);R(this,qe,new Set);R(this,de,new Map);R(this,at);R(this,ut,new Set);R(this,ft);R(this,pt,new Map);R(this,Ke);R(this,Ge);R(this,te,new Map);R(this,Re,new Map);var e,o;J(this,Be,t.rootIRI),J(this,lt,new URL(t.rootIRI).origin),J(this,me,t.vocab),J(this,Ke,t.fetcher),J(this,Ge,t.responseHook),[ze(this,se)._,ze(this,we)._]=Zn(t.headers,t.origins),[ze(this,ve)._,ze(this,ft)._]=Yn(t.vocab,t.aliases),J(this,at,new Map((o=(e=t.handlers)==null?void 0:e.map)==null?void 0:o.call(e,i=>[i.contentType,i]))),t.primary!=null&&J(this,z,new Map(Object.entries(t.primary))),g(this,se).has("accept")||g(this,se).set("accept",Ae);for(let i of Object.values(g(this,we)))i.has("accept")||i.set("accept",Ae)}get rootIRI(){return g(this,Be)}entity(t){return g(this,z).get(t)}get vocab(){return g(this,me)}get aliases(){return Object.fromEntries(g(this,ve).entries().map(([t,e])=>[t.replace(/^/,""),e]))}get context(){return g(this,ft)}expand(t){let e=Symbol.for(t),o=g(this,pt).get(e);if(o!=null)return o;let i;if(g(this,me)!=null&&!/^[\w\d]+\:/.test(t))i=g(this,me)+t;else if(/https?:\/\//.test(t))i=t;else for(let[c,s]of g(this,ve)){let a=new RegExp(`^${c}:`);if(a.test(t)){i=t.replace(a,s);break}}return g(this,pt).set(e,i!=null?i:t),i!=null?i:t}select(t,e){return xe({selector:t,value:e,store:this})}key(){for(;;){let t=Math.random().toString(36).slice(2,7);if(!g(this,ut).has(t))return g(this,ut).add(t),t}}isLoading(t){let e=Z(this,F,Kt).call(this,t,"get");return g(this,qe).has(e)}handleResponse(o){return D(this,arguments,function*(t,e=t.url.toString()){var s,a,l;let i=(l=(a=(s=t.headers.get("content-type"))==null?void 0:s.split)==null?void 0:a.call(s,";"))==null?void 0:l[0];if(i==null)throw new Error("Content type not specified in response");let c=g(this,at).get(i);if(c==null)throw new Error(`No handler configured for content type "${i}"`);if(c.integrationType==="jsonld"){let r=yield c.handler({res:t,store:this});Z(this,F,hn).call(this,{iri:e,res:t,output:r})}else{if(c.integrationType==="problem-details")throw new Error("Problem details response types not supported yet");if(c.integrationType==="html"){let r=yield c.handler({res:t,store:this}),u=g(this,de).get(i);u==null&&(u=new Map,g(this,de).set(i,u)),u.set(e,new Ue(c,{iri:e,contentType:i,html:r.html,id:r.id}))}else if(c.integrationType==="html-fragments"){let r=yield c.handler({res:t,store:this}),u=g(this,de).get(i);u==null&&(u=new Map,g(this,de).set(i,u)),u.set(e,new Me(c,{iri:e,contentType:i,root:r.html,ided:r.ided,anon:r.anon}))}}c.integrationType!=="jsonld"&&Z(this,F,Gt).call(this,e,i)})}subscribe({key:t,selector:e,value:o,listener:i}){let c=xe({selector:e,value:o,store:this}),s=Z(this,F,qt).call(this,t,c);for(let a of c.dependencies){let l=g(this,te).get(a);l==null?g(this,te).set(a,new Set([t])):l.add(t)}return g(this,Re).set(t,{key:t,selector:e,value:o,required:c.required,dependencies:c.dependencies,listener:i,cleanup:s}),c}unsubscribe(t){var e;(e=g(this,Re).get(t))==null||e.cleanup()}fetch(t){return D(this,null,function*(){return yield Z(this,F,_t).call(this,t),g(this,z).get(t)})}submit(t,e){return D(this,null,function*(){return yield Z(this,F,_t).call(this,t,e),this.entity(t)})}static fromInitialState({headers:t,origins:e,handlers:o=[]}){let i=document.getElementById("oct-state-info"),c=JSON.parse(i.innerText),s=new Map,a=o.reduce((l,r)=>Y(H({},l),{[r.contentType]:r}),{});for(let[l,r]of Object.entries(c.alternatives))for(let u of r){let f=a[u.contentType],m=Xn[l];if(m.type!==f.integrationType)continue;let p=m.fromInitialState(f,u);if(p==null)continue;let d=s.get(p.contentType);d==null&&(d=new Map,s.set(p.contentType,d)),d.set(p.iri,p)}return new Wt({handlers:o,alternatives:s,headers:t,origins:e,rootIRI:c.rootIRI,vocab:c.vocab,aliases:c.aliases,primary:c.primary})}toInitialState(){let t="",e={rootIRI:g(this,Be),vocab:g(this,me),aliases:Object.fromEntries(g(this,ve)),primary:Object.fromEntries(g(this,z)),alternatives:{}};for(let o of g(this,de).values())for(let i of o.values())e.alternatives[i.integrationType]==null?e.alternatives[i.integrationType]=[i.getStateInfo()]:e.alternatives[i.integrationType].push(i.getStateInfo()),t+=i.toInitialState();return t+=`<script id="oct-state-info" type="application/json">${JSON.stringify(e)}<\/script>`,t}};Be=new WeakMap,lt=new WeakMap,se=new WeakMap,we=new WeakMap,me=new WeakMap,ve=new WeakMap,z=new WeakMap,qe=new WeakMap,de=new WeakMap,at=new WeakMap,ut=new WeakMap,ft=new WeakMap,pt=new WeakMap,Ke=new WeakMap,Ge=new WeakMap,te=new WeakMap,Re=new WeakMap,F=new WeakSet,qt=function(t,e){return()=>{g(this,Re).delete(t);for(let o of e.dependencies)g(this,te).delete(o),ke&&setTimeout(()=>{var i;((i=g(this,te).get(o))==null?void 0:i.size)===0&&g(this,z).delete(o)},5e3)}},Kt=function(t,e,o){var i;return o=(i=o!=null?o:g(this,se).get("accept"))!=null?i:Ae,`${e==null?void 0:e.toLowerCase()}|${t}|${o.toLowerCase()}`},Gt=function(t,e){let o=g(this,te).get(t);if(o!=null)for(let i of o){let c=g(this,Re).get(i);if(c==null)continue;let s=xe({selector:c.selector,value:c.value,store:this}),a=Z(this,F,qt).call(this,i,s);for(let l of s.dependencies){let r=g(this,te).get(l);r==null?(r=new Set([i]),g(this,te).set(l,r)):r.add(i)}c.cleanup=a,c.listener(s)}},hn=function({iri:t,res:e,output:o}){let i=[t];if(e.ok)g(this,z).set(t,{iri:t,loading:!1,ok:!0,value:o.jsonld});else{let c=new Ct(e.status,e);g(this,z).set(t,{iri:t,loading:!1,ok:!1,value:o.jsonld,status:e.status,reason:c})}for(let c of pe(o.jsonld))i.includes(c["@id"])||g(this,z).set(c["@id"],{iri:c["@id"],loading:!1,ok:!0,value:c});for(let c in i)Z(this,F,Gt).call(this,c)},_t=function(o){return D(this,arguments,function*(t,e={}){var u,f;let i,c=new URL(t),s=e.method||"get",a=(f=(u=e.accept)!=null?u:g(this,se).get("accept"))!=null?f:Ae,l=Z(this,F,Kt).call(this,t,s,e.accept);if(c.origin===g(this,lt))i=new Headers(g(this,se));else if(g(this,we).has(c.origin))i=new Headers(g(this,we).get(c.origin));else throw new Error("Unconfigured origin");a!=null?i.set("accept",a):i.get("accept")==null&&i.set("accept",Ae),g(this,qe).add(l),x();let r=new Promise(m=>{D(this,null,function*(){let p;g(this,Ke)!=null?p=yield g(this,Ke).call(this,t,{method:s,headers:i,body:e.body}):p=yield fetch(t,{method:s,headers:i,body:e.body}),yield this.handleResponse(p,t),g(this,qe).delete(l),x(),m(p)})});g(this,Ge)!=null&&g(this,Ge).call(this,r),yield r})};var Ce=Wt;function zt(n,...t){let e={};if(n instanceof Ce)for(let o of t)e[n.expand(o.type)]=o;else{e[n.type]=n;for(let o of t)e[o.type]=o}return e}function Sn(...n){let t=[];for(let e of n)if(!(typeof e=="undefined"||e===null))if(typeof e=="string")t.push(e);else if(Array.isArray(e))for(let o of e)t.push(o);else for(let[o,i]of Object.entries(e))i&&t.push(o);return t.join(" ")}function Si(n){return n}import On from"jsonld";var wi={integrationType:"jsonld",contentType:"application/ld+json",handler:t=>D(null,[t],function*({res:n}){let e=yield n.json();if(!j(e)&&!Array.isArray(e))throw new Error("JSON-LD Document should be an object");let o=yield On.expand(e,{documentLoader:c=>D(null,null,function*(){let a=yield(yield fetch(c,{headers:{accept:"application/ld+json"}})).json();return{documentUrl:c,document:a}})});return{jsonld:yield On.compact(o,{})}})};import T from"mithril";var mt=()=>{function n(a){return T("code",[T("span.oct-json-quote",'"'),T("a.oct-json-iri",{href:a},a),T("span.oct-json-quote",'"')])}function t(a){let l=typeof a=="boolean"?"oct-json-boolean":typeof a=="number"?"oct-json-number":"oct-json-string",r;return typeof a=="boolean"&&a?r="true":typeof a=="boolean"||(typeof a=="string"?r=[T("span.oct-json-quote",'"'),a,T("span.oct-json-quote",'"')]:r=a),T("code",{className:l},r)}function e(a,l,r=""){let u=[];for(let f=0;f<a.length;f++){let m=a[f];u.push(T("li.oct-json-arr-item",c(null,m,l,r)))}return T("ul.oct-json-arr",u)}let o=["@id","@type","@context"];function i(a,l,r=""){let u=[],f=Object.entries(a).toSorted(m=>m[0]==="@context"?1:-1);for(let m=0;m<f.length;m++){let[p,d]=f[m],y,h=[T("span.oct-json-quote",'"'),T("span.oct-json-obj-key",p),T("span.oct-json-quote",'"'),T("span.oct-json-obj-colon",": ")];if(p==="@id")y=[T("code",h),n(d)];else if(l==null||o.includes(p))y=c(h,d);else if(p.startsWith("@"))y=c(h,d,l,r);else{let O=`${r} ${p}`,S=new URL(l);S.searchParams.set("selector",O);let w=[T("span.oct-json-quote",'"'),T("span.oct-json-obj-key",T("a",{href:S},p)),T("span.oct-json-quote",'"'),T("span.oct-json-obj-colon",": ")];y=c(w,d,l,O)}u.push(T("li.oct-json-obj-item",y))}return T("ul.oct-json-obj",u)}function c(a,l,r,u=""){return j(l)?[T("details.oct-json-details",{open:!0},T("summary.oct-json-details-sum",T("code",a,T("span.oct-json-obj-open","{"))),s(l,r,u)),T("code.oct-json-obj-close","}")]:Array.isArray(l)?[T("details.oct-json-details",{open:!0},T("summary.oct-json-details-sum",T("code",a,T("span.oct-json-obj-open","["))),s(l,r,u)),T("code.oct-json-obj-close","]")]:[T("code",a),s(l,r,u)]}function s(a,l,r=""){return j(a)?i(a,l,r):Array.isArray(a)?e(a,l,r):t(a)}return{view:({attrs:{value:a,selector:l,location:r}})=>{let u=r!=null?new URL(r):void 0;return T(".oct-json",[c(null,a,u,typeof l=="string"?l.trim():void 0)])}}};import q from"mithril";import*as bn from"jsonld";var jt=({attrs:n})=>{let t=n,e=n.o.value,o,i="value";function c(f=!0){return D(this,null,function*(){let{o:m}=t;if(i==="value")o=q(mt,{value:e,selector:t.selector,location:t.location});else if(i==="action-value"&&(m.octironType==="action"||m.octironType==="action-selection"))o=q(mt,{value:m.actionValue.value,selector:t.selector,location:t.location});else if(i==="expanded"){let p=yield bn.compact(e,n.o.store.context);o=q(mt,{value:p,location:t.location})}else if(i==="flattened"){let p=pe(e);o=q(mt,{value:p,selector:t.selector,location:t.location})}f&&x()})}function s(f){f.redraw=!1,i="value",c()}function a(f){f.redraw=!1,i="action-value",c()}function l(f){f.redraw=!1,i="component",c()}function r(f){f.redraw=!1,i="expanded",c()}function u(f){f.redraw=!1,i="flattened",c()}return{oninit:({attrs:f})=>{t=f,c(!1)},onbeforeupdate:({attrs:f})=>{f.o.value!==e&&(e=f.o.value,c(!0))},view:({attrs:{o:f}})=>{let m=[],p,d;return i==="component"?p=q(".oct-debug-body",f.default()):p=q(".oct-debug-body",o),(f.octironType==="action"||f.octironType==="action-selection")&&(d=q("button.oct-button",{type:"button",onclick:a},"Action value")),q("aside.oct-debug",q(".oct-debug-controls",q(".oct-button-group",q("button.oct-button",{type:"button",onclick:s},"Value"),d,q("button.oct-button",{type:"button",onclick:l},"Component"),q("button.oct-button",{type:"button",onclick:()=>console.log(f)},"Log"),...m)),p)}}};import $ from"mithril";var Ei=({attrs:n})=>{let t=n.selector||"",e=t,o=t,i=n.presentationStyle||"debug",c=n.onChange,s={view:({attrs:{o:m}})=>$(jt,{o:m,location:n.location})};function a(m){t=m.target.value}function l(m){m.key==="Enter"&&r()}function r(){o=t,typeof c=="function"&&c(o,i)}function u(){i="debug",typeof c=="function"&&c(o,i)}function f(){i="components",typeof c=="function"&&c(o,i)}return{oninit:({attrs:m})=>{c=m.onChange},onbeforeupdate:({attrs:m})=>{var p;o=(p=m.selector)!=null?p:"",o!==e&&(t=e=o),c=m.onChange},view:({attrs:{autofocus:m,o:p}})=>{let d;return o.length!==0&&i==="debug"?d=p.root(o,y=>$(jt,{o:y,selector:o,location:n.location})):o.length!==0?d=p.root(o,y=>$("div",y.default({fallbackComponent:s,attrs:{selector:o}}))):i==="debug"?d=p.root(y=>$(jt,{o:y,selector:o,location:n.location})):d=p.root(y=>$("div",y.default({fallbackComponent:s,attrs:{selector:o}}))),$(".oct-explorer",$(".oct-explorer-controls",$(".oct-form-group",[$("input",{value:t,autofocus:m,oninput:a,onkeypress:l}),$("button.oct-button",{type:"button",disabled:o===t,onclick:r},"Apply")]),$(".oct-button-group",$("button.oct-button",{type:"button",disabled:i==="debug",onclick:u},"Debug"),$("button.oct-button",{type:"button",disabled:i==="components",onclick:f},"Components"))),$("pre.oct-explorer-body",d))}}};import eo from"mithril";var Li=n=>{var i;let e=((i=n.attrs.o.method)==null?void 0:i.toUpperCase())||"POST",o={GET:"application/x-www-form-urlencoded",POST:"multipart/form-data"};return{view:l=>{var r=l,{attrs:u}=r,f=u,{o:c}=f,s=We(f,["o"]),{children:a}=r;return eo("form.oct-form",Y(H({},s),{method:e,enctype:o[e||"GET"],action:c.url,onSubmit:m=>{m.preventDefault(),c.submit()}}),a)}}};import to from"mithril";var qi=()=>({view:({attrs:n,children:t})=>to("button.oct-button.oct-submit-button",{id:n.id,type:"submit",class:Sn(n.class)},t)});function An(e){var o=e,{typeDefs:n}=o,t=We(o,["typeDefs"]);let i=new Ce(t),c=n!=null?zt(i,...n):{};return $t({store:i,typeDefs:c})}An.fromInitialState=e=>{var o=e,{typeDefs:n}=o,t=We(o,["typeDefs"]);let i=Ce.fromInitialState(H({},t)),c=n!=null?zt(i,...n):{};return $t({store:i,typeDefs:c})};export{jt as OctironDebug,Ei as OctironExplorer,Li as OctironForm,mt as OctironJSON,qi as OctironSubmitButton,Ce as Store,Sn as classes,An as default,wi as jsonLDHandler,Si as makeTypeDef,zt as makeTypeDefs};
//# sourceMappingURL=octiron.min.js.map
